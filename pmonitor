#!/bin/bash

pmonitor_file=/tmp/.pmonitor.me
while true
do
while read line
do
    count=0
    for token in $line
    do
        if [ $count == 0 ];then
            pid=$token
            count=$count+1
            continue
        fi
        if [$count == 1 ];then
            commend=$token
            continue
        fi
        commend="$commend $token"
    done

    ps -ax | awk '{ print $1  }' | grep -e "^${pid}$"
    c_pid=$?
    if [ $c_pid -eq 0 ];then
       continue
    fi
    eval "$commend"
    new_pid=$!
    sed -i "s/\d+\s${commend}/${pid} ${commend}/g" $pmonitor_file
done < $pmonitor_file
sleep 120
done
